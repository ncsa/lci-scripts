
PLAY [Slurm Source Build - Head Node] ******************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Install Slurm build dependencies] ****************************************
ok: [localhost]

TASK [Create slurm group] ******************************************************
ok: [localhost]

TASK [Create slurm user] *******************************************************
ok: [localhost]

TASK [Create Slurm directories] ************************************************
ok: [localhost] => (item=/opt/slurm)
ok: [localhost] => (item=/etc/slurm)
ok: [localhost] => (item=/var/log/slurm)
ok: [localhost] => (item=/var/run/slurm)
ok: [localhost] => (item=/var/spool/slurmd.spool)
ok: [localhost] => (item=/var/spool/slurm.state)

TASK [Create log files with proper ownership] **********************************
changed: [localhost] => (item=/var/log/slurm/slurmdbd.log)
changed: [localhost] => (item=/var/run/slurm/slurmdbd.pid)

TASK [Generate MUNGE key if not exists] ****************************************
ok: [localhost]

TASK [Set MUNGE directory permissions] *****************************************
ok: [localhost] => (item=/etc/munge)
ok: [localhost] => (item=/var/lib/munge)
ok: [localhost] => (item=/var/log/munge)

TASK [Set MUNGE key permissions] ***********************************************
ok: [localhost]

TASK [Enable and start MUNGE service] ******************************************
ok: [localhost]

TASK [Add Slurm to PATH] *******************************************************
ok: [localhost]

TASK [Install MariaDB server] **************************************************
ok: [localhost]

TASK [Enable and start MariaDB] ************************************************
ok: [localhost]

TASK [Check if slurm_acct_db database exists] **********************************
fatal: [localhost]: FAILED! => {"changed": false, "cmd": "mysql -u root -e \"SELECT 1 FROM mysql.user WHERE user='slurm' AND host='localhost';\" 2>/dev/null | grep -q 1\n", "delta": "0:00:00.010787", "end": "2026-02-20 17:45:21.164266", "msg": "non-zero return code", "rc": 1, "start": "2026-02-20 17:45:21.153479", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Create slurm_acct_db database and user] **********************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "mysql -u root <<'EOF'\nCREATE DATABASE IF NOT EXISTS slurm_acct_db;\nCREATE USER IF NOT EXISTS 'slurm'@'localhost' IDENTIFIED BY 'lcilab2026';\nGRANT ALL PRIVILEGES ON slurm_acct_db.* TO 'slurm'@'localhost';\nFLUSH PRIVILEGES;\nEOF\n", "delta": "0:00:00.009790", "end": "2026-02-20 17:45:21.395678", "msg": "non-zero return code", "rc": 1, "start": "2026-02-20 17:45:21.385888", "stderr": "ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)", "stderr_lines": ["ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Check if Slurm already built] ********************************************
ok: [localhost]

TASK [Download Slurm source] ***************************************************
ok: [localhost]

TASK [Extract Slurm source] ****************************************************
skipping: [localhost]

TASK [Create build directory] **************************************************
ok: [localhost]

TASK [Create PAM directory before configure (required for Slurm 25.x)] *********
ok: [localhost]

TASK [Configure Slurm] *********************************************************
changed: [localhost]

TASK [Build Slurm] *************************************************************
changed: [localhost]

TASK [Install Slurm] ***********************************************************
changed: [localhost]

TASK [Install contrib] *********************************************************
changed: [localhost]

TASK [Create current symlink] **************************************************
changed: [localhost]

TASK [Set ownership on installed Slurm] ****************************************
changed: [localhost]

TASK [Copy slurm.conf to /etc/slurm] *******************************************
changed: [localhost]

TASK [Copy slurmdbd.conf] ******************************************************
changed: [localhost]

TASK [Update slurmdbd.conf with database password] *****************************
changed: [localhost]

TASK [Copy slurmdbd.service] ***************************************************
An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
fatal: [localhost]: FAILED! => {"changed": false, "msg": "Could not find or access 'roles/slurm-source/files/slurmdbd.service'\nSearched in:\n\t/root/Scheduler_installation_playbook/files/roles/slurm-source/files/slurmdbd.service\n\t/root/Scheduler_installation_playbook/roles/slurm-source/files/slurmdbd.service\n\t/root/Scheduler_installation_playbook/files/roles/slurm-source/files/slurmdbd.service\n\t/root/Scheduler_installation_playbook/roles/slurm-source/files/slurmdbd.service on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}

PLAY RECAP *********************************************************************
localhost                  : ok=28   changed=11   unreachable=0    failed=1    skipped=1    rescued=0    ignored=2   

