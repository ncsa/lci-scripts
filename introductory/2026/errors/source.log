
PLAY [Slurm Source Build - Head Node] ******************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Install Slurm build dependencies] ****************************************
ok: [localhost]

TASK [Create slurm group] ******************************************************
ok: [localhost]

TASK [Create slurm user] *******************************************************
ok: [localhost]

TASK [Create Slurm directories] ************************************************
ok: [localhost] => (item=/opt/slurm)
ok: [localhost] => (item=/etc/slurm)
ok: [localhost] => (item=/var/log/slurm)
ok: [localhost] => (item=/var/run/slurm)
ok: [localhost] => (item=/var/spool/slurmd.spool)
ok: [localhost] => (item=/var/spool/slurm.state)

TASK [Create log files with proper ownership] **********************************
changed: [localhost] => (item=/var/log/slurm/slurmdbd.log)
changed: [localhost] => (item=/var/run/slurm/slurmdbd.pid)

TASK [Generate MUNGE key if not exists] ****************************************
ok: [localhost]

TASK [Set MUNGE directory permissions] *****************************************
ok: [localhost] => (item=/etc/munge)
ok: [localhost] => (item=/var/lib/munge)
ok: [localhost] => (item=/var/log/munge)

TASK [Set MUNGE key permissions] ***********************************************
ok: [localhost]

TASK [Enable and start MUNGE service] ******************************************
ok: [localhost]

TASK [Add Slurm to PATH] *******************************************************
ok: [localhost]

TASK [Install MariaDB server] **************************************************
ok: [localhost]

TASK [Enable and start MariaDB] ************************************************
ok: [localhost]

TASK [Check if slurm database user exists] *************************************
fatal: [localhost]: FAILED! => {"changed": false, "cmd": "mysql -u root -S /var/lib/mysql/mysql.sock -e \"SELECT 1 FROM mysql.user WHERE user='slurm' AND host='localhost';\" 2>/dev/null | grep -q 1\n", "delta": "0:00:00.010317", "end": "2026-02-20 17:58:04.665593", "msg": "non-zero return code", "rc": 1, "start": "2026-02-20 17:58:04.655276", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Create slurm_acct_db database and user] **********************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": "mysql -u root -S /var/lib/mysql/mysql.sock <<'EOF'\nCREATE DATABASE IF NOT EXISTS slurm_acct_db;\nCREATE USER IF NOT EXISTS 'slurm'@'localhost' IDENTIFIED BY 'lcilab2026';\nGRANT ALL PRIVILEGES ON slurm_acct_db.* TO 'slurm'@'localhost';\nFLUSH PRIVILEGES;\nEOF\n", "delta": "0:00:00.010023", "end": "2026-02-20 17:58:04.892063", "msg": "non-zero return code", "rc": 1, "start": "2026-02-20 17:58:04.882040", "stderr": "ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)", "stderr_lines": ["ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [Check if Slurm already built] ********************************************
ok: [localhost]

TASK [Download Slurm source] ***************************************************
skipping: [localhost]

TASK [Extract Slurm source] ****************************************************
skipping: [localhost]

TASK [Create build directory] **************************************************
skipping: [localhost]

TASK [Create PAM directory before configure (required for Slurm 25.x)] *********
skipping: [localhost]

TASK [Configure Slurm] *********************************************************
skipping: [localhost]

TASK [Build Slurm] *************************************************************
skipping: [localhost]

TASK [Install Slurm] ***********************************************************
skipping: [localhost]

TASK [Install contrib] *********************************************************
skipping: [localhost]

TASK [Create current symlink] **************************************************
ok: [localhost]

TASK [Set ownership on installed Slurm] ****************************************
ok: [localhost]

TASK [Copy slurm.conf to /etc/slurm] *******************************************
ok: [localhost]

TASK [Copy slurmdbd.conf] ******************************************************
changed: [localhost]

TASK [Update slurmdbd.conf with database password] *****************************
changed: [localhost]

TASK [Copy slurmdbd.service] ***************************************************
changed: [localhost]

TASK [Ensure job_container.conf exists] ****************************************
changed: [localhost]

TASK [Copy slurmctld.service] **************************************************
changed: [localhost]

TASK [Copy slurmrestd.service] *************************************************
changed: [localhost]

TASK [Reload systemd] **********************************************************
ok: [localhost]

TASK [Enable and start slurmdbd] ***********************************************
changed: [localhost]

TASK [Wait for slurmdbd to be ready] *******************************************
ok: [localhost]

TASK [Enable and start slurmctld] **********************************************
changed: [localhost]

TASK [Enable and start slurmd on head (head is also a compute node)] ***********
fatal: [localhost]: FAILED! => {"changed": false, "msg": "Could not find the requested service slurmd: host"}

PLAY RECAP *********************************************************************
localhost                  : ok=29   changed=10   unreachable=0    failed=1    skipped=8    rescued=0    ignored=2   

