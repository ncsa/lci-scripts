
PLAY [Slurm Source Build - Head Node] ******************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Install Slurm build dependencies] ****************************************
changed: [localhost]

TASK [Create slurm group] ******************************************************
changed: [localhost]

TASK [Create slurm user] *******************************************************
changed: [localhost]

TASK [Create Slurm directories] ************************************************
changed: [localhost] => (item=/opt/slurm)
changed: [localhost] => (item=/etc/slurm)
changed: [localhost] => (item=/var/log/slurm)
changed: [localhost] => (item=/var/run/slurm)
changed: [localhost] => (item=/var/spool/slurmd.spool)
changed: [localhost] => (item=/var/spool/slurm.state)

TASK [Create log files with proper ownership] **********************************
changed: [localhost] => (item=/var/log/slurm/slurmdbd.log)
changed: [localhost] => (item=/var/run/slurm/slurmdbd.pid)

TASK [Generate MUNGE key if not exists] ****************************************
changed: [localhost]

TASK [Set MUNGE directory permissions] *****************************************
ok: [localhost] => (item=/etc/munge)
ok: [localhost] => (item=/var/lib/munge)
ok: [localhost] => (item=/var/log/munge)

TASK [Set MUNGE key permissions] ***********************************************
ok: [localhost]

TASK [Enable and start MUNGE service] ******************************************
changed: [localhost]

TASK [Add Slurm to PATH] *******************************************************
changed: [localhost]

TASK [Install MariaDB server] **************************************************
ok: [localhost]

TASK [Enable and start MariaDB] ************************************************
ok: [localhost]

TASK [Create slurm_acct_db database and user] **********************************
fatal: [localhost]: FAILED! => {"changed": false, "msg": "unable to connect to database, check login_user and login_password are correct or /root/.my.cnf has the credentials. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: NO)\")"}
...ignoring

TASK [Check if Slurm already built] ********************************************
ok: [localhost]

TASK [Download Slurm source] ***************************************************
changed: [localhost]

TASK [Extract Slurm source] ****************************************************
changed: [localhost]

TASK [Create build directory] **************************************************
changed: [localhost]

TASK [Configure Slurm] *********************************************************
fatal: [localhost]: FAILED! => {"changed": true, "cmd": ["../configure", "--without-shared-libslurm", "--with-munge", "--with-hwloc", "--with-pmix", "--with-jwt", "--with-json", "--enable-slurmrestd", "--prefix=/opt/slurm/25.05.6-built", "--with-ucx", "--with-lua", "--enable-pam", "--with-pam_dir=/opt/slurm/25.05.6-built/lib64/security", "--sysconfdir=/etc/slurm"], "delta": "0:00:04.253348", "end": "2026-02-20 17:30:56.665250", "msg": "non-zero return code", "rc": 1, "start": "2026-02-20 17:30:52.411902", "stderr": "configure: error: bad value \"/opt/slurm/25.05.6-built/lib64/security\" for --with-pam_dir", "stderr_lines": ["configure: error: bad value \"/opt/slurm/25.05.6-built/lib64/security\" for --with-pam_dir"], "stdout": "checking build system type... x86_64-pc-linux-gnu\nchecking host system type... x86_64-pc-linux-gnu\nchecking target system type... x86_64-pc-linux-gnu\nchecking for a BSD-compatible install... /bin/install -c\nchecking whether sleep supports fractional seconds... yes\nchecking filesystem timestamp resolution... 0.01\nchecking whether build environment is sane... yes\nchecking for a race-free mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking xargs -n works... yes\nchecking whether to enable maintainer-specific portions of Makefiles... no\nchecking whether to include rpath in build... yes\nchecking whether make supports the include directive... yes (GNU style)\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether the compiler supports GNU C... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to enable C11 features... none needed\nchecking whether gcc understands -c and -o together... yes\nchecking dependency style of gcc... gcc3\nchecking for mysql_config... /bin/mysql_config\nMySQL 10.6.6 test program built properly.\nchecking for gcc... (cached) gcc\nchecking whether the compiler supports GNU C... (cached) yes\nchecking whether gcc accepts -g... (cached) yes\nchecking for gcc option to enable C11 features... (cached) none needed\nchecking whether gcc understands -c and -o together... (cached) yes\nchecking dependency style of gcc... (cached) gcc3\nchecking for g++... g++\nchecking whether the compiler supports GNU C++... yes\nchecking whether g++ accepts -g... yes\nchecking for g++ option to enable C++11 features... none needed\nchecking dependency style of g++... gcc3\nchecking whether make sets $(MAKE)... (cached) yes\nchecking how to print strings... printf\nchecking for a sed that does not truncate output... /bin/sed\nchecking for grep that handles long lines and -e... /bin/grep\nchecking for egrep... /bin/grep -E\nchecking for fgrep... /bin/grep -F\nchecking for ld used by gcc... /bin/ld\nchecking if the linker (/bin/ld) is GNU ld... yes\nchecking for BSD- or MS-compatible name lister (nm)... /bin/nm -B\nchecking the name lister (/bin/nm -B) interface... BSD nm\nchecking whether ln -s works... yes\nchecking the maximum length of command line arguments... 1572864\nchecking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop\nchecking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop\nchecking for /bin/ld option to reload object files... -r\nchecking for file... file\nchecking for objdump... objdump\nchecking how to recognize dependent libraries... pass_all\nchecking for dlltool... no\nchecking how to associate runtime and link libraries... printf %s\\n\nchecking for ar... ar\nchecking for archiver @FILE support... @\nchecking for strip... strip\nchecking for ranlib... ranlib\nchecking command to parse /bin/nm -B output from gcc object... ok\nchecking for sysroot... no\nchecking for a working dd... /bin/dd\nchecking how to truncate binary pipes... /bin/dd bs=4096 count=1\nchecking for mt... no\nchecking if : is a manifest tool... no\nchecking for stdio.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for strings.h... yes\nchecking for sys/stat.h... yes\nchecking for sys/types.h... yes\nchecking for unistd.h... yes\nchecking for dlfcn.h... yes\nchecking for objdir... .libs\nchecking if gcc supports -fno-rtti -fno-exceptions... no\nchecking for gcc option to produce PIC... -fPIC -DPIC\nchecking if gcc PIC flag -fPIC -DPIC works... yes\nchecking if gcc static flag -static works... no\nchecking if gcc supports -c -o file.o... yes\nchecking if gcc supports -c -o file.o... (cached) yes\nchecking whether the gcc linker (/bin/ld -m elf_x86_64) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... no\nchecking dynamic linker characteristics... GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... yes\nchecking how to run the C++ preprocessor... g++ -E\nchecking for ld used by g++... /bin/ld -m elf_x86_64\nchecking if the linker (/bin/ld -m elf_x86_64) is GNU ld... yes\nchecking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes\nchecking for g++ option to produce PIC... -fPIC -DPIC\nchecking if g++ PIC flag -fPIC -DPIC works... yes\nchecking if g++ static flag -static works... no\nchecking if g++ supports -c -o file.o... yes\nchecking if g++ supports -c -o file.o... (cached) yes\nchecking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes\nchecking dynamic linker characteristics... (cached) GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking for pkg-config... /bin/pkg-config\nchecking pkg-config is at least version 0.9.0... yes\nchecking whether to install pkg-config slurm.pc file... no\nchecking for -objcopy... no\nchecking for objcopy... objcopy\nchecking for sleep... /bin/sleep\nchecking for su... /bin/su\nchecking whether the compiler is Clang... no\nchecking for library containing socket... none required\nchecking for library containing gethostbyname... none required\nchecking for library containing hstrerror... none required\nchecking for library containing kstat_open... no\nchecking for library containing ns_initparse... -lresolv\nchecking for library containing log... -lm\nchecking for library containing lrint... none required\nchecking for library containing timer_create... none required\nchecking for library containing dlopen... none required\nchecking for mcheck.h... yes\nchecking for values.h... yes\nchecking for socket.h... no\nchecking for sys/socket.h... yes\nchecking for stdbool.h... yes\nchecking for sys/ipc.h... yes\nchecking for sys/shm.h... yes\nchecking for sys/sem.h... yes\nchecking for errno.h... yes\nchecking for stdlib.h... (cached) yes\nchecking for dirent.h... yes\nchecking for pthread.h... yes\nchecking for sys/prctl.h... yes\nchecking for sysint.h... no\nchecking for inttypes.h... (cached) yes\nchecking for termcap.h... yes\nchecking for netdb.h... yes\nchecking for sys/socket.h... (cached) yes\nchecking for sys/systemcfg.h... no\nchecking for sys/dr.h... no\nchecking for sys/vfs.h... yes\nchecking for pam/pam_appl.h... no\nchecking for security/pam_appl.h... yes\nchecking for sys/sysctl.h... no\nchecking for pty.h... yes\nchecking for utmp.h... yes\nchecking for sys/syslog.h... yes\nchecking for linux/sched.h... yes\nchecking for kstat.h... no\nchecking for paths.h... yes\nchecking for limits.h... yes\nchecking for sys/statfs.h... yes\nchecking for sys/ptrace.h... yes\nchecking for float.h... yes\nchecking for sys/statvfs.h... yes\nchecking for sys/wait.h that is POSIX.1 compatible... yes\nchecking for sys/mkdev.h... no\nchecking for sys/sysmacros.h... yes\nchecking for program_invocation_name... yes\nchecking for ptrace64... no\nchecking for numa_available in -lnuma... yes\nchecking whether to enable PAM support... yes\nchecking for pam_get_user in -lpam... yes\nchecking for misc_conv in -lpam_misc... yes", "stdout_lines": ["checking build system type... x86_64-pc-linux-gnu", "checking host system type... x86_64-pc-linux-gnu", "checking target system type... x86_64-pc-linux-gnu", "checking for a BSD-compatible install... /bin/install -c", "checking whether sleep supports fractional seconds... yes", "checking filesystem timestamp resolution... 0.01", "checking whether build environment is sane... yes", "checking for a race-free mkdir -p... /bin/mkdir -p", "checking for gawk... gawk", "checking whether make sets $(MAKE)... yes", "checking whether make supports nested variables... yes", "checking xargs -n works... yes", "checking whether to enable maintainer-specific portions of Makefiles... no", "checking whether to include rpath in build... yes", "checking whether make supports the include directive... yes (GNU style)", "checking for gcc... gcc", "checking whether the C compiler works... yes", "checking for C compiler default output file name... a.out", "checking for suffix of executables... ", "checking whether we are cross compiling... no", "checking for suffix of object files... o", "checking whether the compiler supports GNU C... yes", "checking whether gcc accepts -g... yes", "checking for gcc option to enable C11 features... none needed", "checking whether gcc understands -c and -o together... yes", "checking dependency style of gcc... gcc3", "checking for mysql_config... /bin/mysql_config", "MySQL 10.6.6 test program built properly.", "checking for gcc... (cached) gcc", "checking whether the compiler supports GNU C... (cached) yes", "checking whether gcc accepts -g... (cached) yes", "checking for gcc option to enable C11 features... (cached) none needed", "checking whether gcc understands -c and -o together... (cached) yes", "checking dependency style of gcc... (cached) gcc3", "checking for g++... g++", "checking whether the compiler supports GNU C++... yes", "checking whether g++ accepts -g... yes", "checking for g++ option to enable C++11 features... none needed", "checking dependency style of g++... gcc3", "checking whether make sets $(MAKE)... (cached) yes", "checking how to print strings... printf", "checking for a sed that does not truncate output... /bin/sed", "checking for grep that handles long lines and -e... /bin/grep", "checking for egrep... /bin/grep -E", "checking for fgrep... /bin/grep -F", "checking for ld used by gcc... /bin/ld", "checking if the linker (/bin/ld) is GNU ld... yes", "checking for BSD- or MS-compatible name lister (nm)... /bin/nm -B", "checking the name lister (/bin/nm -B) interface... BSD nm", "checking whether ln -s works... yes", "checking the maximum length of command line arguments... 1572864", "checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop", "checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop", "checking for /bin/ld option to reload object files... -r", "checking for file... file", "checking for objdump... objdump", "checking how to recognize dependent libraries... pass_all", "checking for dlltool... no", "checking how to associate runtime and link libraries... printf %s\\n", "checking for ar... ar", "checking for archiver @FILE support... @", "checking for strip... strip", "checking for ranlib... ranlib", "checking command to parse /bin/nm -B output from gcc object... ok", "checking for sysroot... no", "checking for a working dd... /bin/dd", "checking how to truncate binary pipes... /bin/dd bs=4096 count=1", "checking for mt... no", "checking if : is a manifest tool... no", "checking for stdio.h... yes", "checking for stdlib.h... yes", "checking for string.h... yes", "checking for inttypes.h... yes", "checking for stdint.h... yes", "checking for strings.h... yes", "checking for sys/stat.h... yes", "checking for sys/types.h... yes", "checking for unistd.h... yes", "checking for dlfcn.h... yes", "checking for objdir... .libs", "checking if gcc supports -fno-rtti -fno-exceptions... no", "checking for gcc option to produce PIC... -fPIC -DPIC", "checking if gcc PIC flag -fPIC -DPIC works... yes", "checking if gcc static flag -static works... no", "checking if gcc supports -c -o file.o... yes", "checking if gcc supports -c -o file.o... (cached) yes", "checking whether the gcc linker (/bin/ld -m elf_x86_64) supports shared libraries... yes", "checking whether -lc should be explicitly linked in... no", "checking dynamic linker characteristics... GNU/Linux ld.so", "checking how to hardcode library paths into programs... immediate", "checking whether stripping libraries is possible... yes", "checking if libtool supports shared libraries... yes", "checking whether to build shared libraries... yes", "checking whether to build static libraries... yes", "checking how to run the C++ preprocessor... g++ -E", "checking for ld used by g++... /bin/ld -m elf_x86_64", "checking if the linker (/bin/ld -m elf_x86_64) is GNU ld... yes", "checking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes", "checking for g++ option to produce PIC... -fPIC -DPIC", "checking if g++ PIC flag -fPIC -DPIC works... yes", "checking if g++ static flag -static works... no", "checking if g++ supports -c -o file.o... yes", "checking if g++ supports -c -o file.o... (cached) yes", "checking whether the g++ linker (/bin/ld -m elf_x86_64) supports shared libraries... yes", "checking dynamic linker characteristics... (cached) GNU/Linux ld.so", "checking how to hardcode library paths into programs... immediate", "checking for pkg-config... /bin/pkg-config", "checking pkg-config is at least version 0.9.0... yes", "checking whether to install pkg-config slurm.pc file... no", "checking for -objcopy... no", "checking for objcopy... objcopy", "checking for sleep... /bin/sleep", "checking for su... /bin/su", "checking whether the compiler is Clang... no", "checking for library containing socket... none required", "checking for library containing gethostbyname... none required", "checking for library containing hstrerror... none required", "checking for library containing kstat_open... no", "checking for library containing ns_initparse... -lresolv", "checking for library containing log... -lm", "checking for library containing lrint... none required", "checking for library containing timer_create... none required", "checking for library containing dlopen... none required", "checking for mcheck.h... yes", "checking for values.h... yes", "checking for socket.h... no", "checking for sys/socket.h... yes", "checking for stdbool.h... yes", "checking for sys/ipc.h... yes", "checking for sys/shm.h... yes", "checking for sys/sem.h... yes", "checking for errno.h... yes", "checking for stdlib.h... (cached) yes", "checking for dirent.h... yes", "checking for pthread.h... yes", "checking for sys/prctl.h... yes", "checking for sysint.h... no", "checking for inttypes.h... (cached) yes", "checking for termcap.h... yes", "checking for netdb.h... yes", "checking for sys/socket.h... (cached) yes", "checking for sys/systemcfg.h... no", "checking for sys/dr.h... no", "checking for sys/vfs.h... yes", "checking for pam/pam_appl.h... no", "checking for security/pam_appl.h... yes", "checking for sys/sysctl.h... no", "checking for pty.h... yes", "checking for utmp.h... yes", "checking for sys/syslog.h... yes", "checking for linux/sched.h... yes", "checking for kstat.h... no", "checking for paths.h... yes", "checking for limits.h... yes", "checking for sys/statfs.h... yes", "checking for sys/ptrace.h... yes", "checking for float.h... yes", "checking for sys/statvfs.h... yes", "checking for sys/wait.h that is POSIX.1 compatible... yes", "checking for sys/mkdev.h... no", "checking for sys/sysmacros.h... yes", "checking for program_invocation_name... yes", "checking for ptrace64... no", "checking for numa_available in -lnuma... yes", "checking whether to enable PAM support... yes", "checking for pam_get_user in -lpam... yes", "checking for misc_conv in -lpam_misc... yes"]}

PLAY RECAP *********************************************************************
localhost                  : ok=18   changed=11   unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   

