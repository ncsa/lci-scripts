# ------------------------------------------------------------------
# - Drop into /etc/slurm/slurmdbd.conf
# - Owned by slurm:slurm, mode 600 (only readable by Slurm user)
# ------------------------------------------------------------------

# Authentication used between slurmctld <-> slurmdbd etc.
# Common choices: auth/munge or auth/slurm. Use what your slurm.conf uses.
AuthType=auth/munge
AuthInfo=/var/run/munge/munge.socket.2

# slurmdbd network/address settings
# DbdHost   : the hostname this daemon identifies as (optional)
# DbdAddr   : address to bind to (can be omitted for default)
DbdHost=localhost
DbdAddr=localhost
DbdPort=6819

# The user the daemon runs as (usually 'slurm')
SlurmUser=slurm

# Logging and debug
DebugLevel=info
LogFile=/var/log/slurm/slurmdbd.log
PidFile=/var/run/slurm/slurmdbd.pid

# What private data to serve to clients (reduce surface if you want)
#PrivateData=accounts,users,usage,jobs

# Database backend (MariaDB/MySQL)
# StorageType for MySQL/MariaDB plugin:
StorageType=accounting_storage/mysql

# Where MariaDB is listening. Use 127.0.0.1 or hostname/IP.
# For local slurmdbd on same machine: localhost or 127.0.0.1
# For remote DB server: set to DB server IP or hostname.
StorageHost=127.0.0.1
#StoragePort=3306

# Credentials for the slurm DB user
# IMPORTANT: do not leave this file world-readable. Keep mode 600 and owner slurm.
StorageUser=slurm
StoragePass={{ db_pwd }}

# Database name where slurm stores accounting info (must exist)
StorageLoc=slurm_acct_db

# Message / timeout settings
MessageTimeout=30
